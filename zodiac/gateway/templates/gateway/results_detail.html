{% extends "gateway/base.html" %}

{% block h1_title %}
  Result Detail
  <small>{{object.date_done}}</small>
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-12">
    <div class="box box-primary">
      <div class="box-body">
        <dl>
          <dt>Identifier</dt>
          <dd>{{object.task_id}}</dd>
          <dt>Status</dt>
          <dd>{{object.status}}</dd>
          <dt>Arguments</dt>
          <dd>{{object.task_args}}</dd>
          <dt>Keyword Arguments</dt>
          <dd>{{object.task_kwargs}}</dd>
          <dt>Result</dt>
          <dd><pre><code>{{ object.result }}</code></pre></dd>
          {% if object.traceback %}
            <dt>Traceback</dt>
            <dd><pre><code>{{object.traceback }}</code></pre></dd>
          {% endif %}
        </dl>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
  var trigger_url = '{{ object.get_trigger_url }}'
  $(document).ready(function(){
    $('#trigger-service-btn').click(function(){
      $.get(trigger_url,{}, function(resp){
        if(resp.SUCCESS == 1){
          alert('it worked, request queued')
        }
      });
    })
  });

</script>
{% endblock %}
